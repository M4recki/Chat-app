<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Head -->
    {% include "head.html" %}

    <title>Chat app - Individual Chat</title>
  </head>
  <body>
    <!-- Header -->
    {% include "header.html" %}

    <!-- Main content -->
    <main>
      <div class="container-fluid">
        <div class="row">
          <!-- Sidebar -->
          {% include "sidebar.html" %}

          <section role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
            <h1 class="mt-5 text-center">Your groups</h1>
            <!-- Group avatars -->
            <div
              class="d-flex flex-nowrap overflow-auto mb-3 justify-content-center mt-4">
              <button
                class="card mb-2 me-3"
                onclick="document.getElementById('delete-confirmation').showModal()">
                <a
                  href="{{ url_for('search_user') }}"
                  class="text-decoration-none">
                  <div class="card-body text-center">
                    <i
                      class="bi bi-plus-circle icon-size card-img-top mt-3 mx-auto"></i>
                    <p class="card-title lead mt-4">Create new group</p>
                  </div>
                </a>
              </button>
              <dialog id="delete-confirmation">
                Add a members:

                <!-- List of all friends -->
                {% for user in users %}
                <div class="card mb-2 me-3">
                  <a
                    href="{{ url_for('friend_chat_page', channel_id=channel_id) }}"
                    class="text-decoration-none">
                    <div class="card-body text-center">
                      <img
                        class="card-img-top user-image mx-auto mt-3"
                        src="data:image/jpeg;base64,{{ user.avatar }}"
                        alt="{{ user.name }}'s avatar" />
                      <div class="card-body">
                        <p class="card-title lead text-dark">
                          {{ user.name }} {{ user.surname }}
                        </p>
                      </div>
                    </div>
                  </a>
                </div>
                {% endfor %}
                
                <div
                  class="button-container my-5 d-flex justify-content-center">
                  <button
                    class="btn btn-success me-3 text-dark"
                    id="close-dialog"
                    onclick="DeleteConfirmationClose()">
                    <label for="cancel" class="btn-text">Cancel</label>
                  </button>
                  <a
                    href="{{ url_for('deny_friend', friend_id=friend_request.user1_id) }}"
                    ><button class="btn btn-danger text-dark">
                      <label for="delete" class="btn-text">Confirm</label>
                    </button></a
                  >
                </div>
              </dialog>

              <!-- Your groups -->
              {% for group in groups %}
              <div class="card mb-2 me-3">
                <a
                  href="{{ url_for('group_chat', group_id=group.id) }}"
                  class="text-decoration-none">
                  <div class="card-body text-center">
                    <img
                      class="card-img-top user-image mx-auto mt-3"
                      src="data:image/jpeg;base64,{{ group.avatar }}"
                      alt="{{ group.name }}'s avatar" />
                    <div class="card-body">
                      <p class="card-title lead">{{ group.name }}</p>
                    </div>
                  </div>
                </a>
              </div>
              {% endfor %}
            </div>
          </section>
        </div>
      </div>
    </main>

    <!-- Footer -->
    {% include "footer.html" %}
  </body>
</html>
